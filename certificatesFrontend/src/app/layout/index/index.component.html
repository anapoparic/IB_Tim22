<html>
<body>
    <div class="main-div">

        <div class="main-admin-child"></div>
        <app-nav-bar></app-nav-bar>

        <div id="sort-bar" class="sort-bar">
            <div class="requests" [ngClass]="{ 'clicked': selectedClass === 'requests' }" (click)="changeStyle('requests')">
              Requests
            </div>
            <div class="certifications" [ngClass]="{ 'clicked': selectedClass === 'certifications' }" (click)="changeStyle('certifications')">
              Certificates
            </div>
        </div>

        <div class="main-content"  *ngIf="selectedClass === 'requests'">
          <b class="no-text" *ngIf="(requests | async)?.length == 0">NO RESULTS</b>
          <div *ngFor="let request of requests | async" class="request-frame">
              <img
              class="icon-image"
              alt=""
              src="../../../assets/public/certificate (5).png"
              />
              <div class="left-data">
                <div class="top-data-box">
                  <div class="horizontal-frame">
                    <div class="title"><b>No. {{ request.id }} {{ request.commonName }}</b> </div>
                  </div>
                </div>

                <div class="bottom-data-box">
                  <div class="horizontal-frame">
                    <div ><b class="light-text">Full Name:</b> {{ request.firstName }} {{request.lastName}} </div>
                  </div>
                  <div class="horizontal-frame">
                    <div ><b class="light-text">Organization and Unit:</b> {{ request.organization }} - {{request.unit}} </div>
                  </div>
                  <div><b class="light-text">Country: </b>{{ request.country }}</div>
                  <div><b class="light-text">Email: </b>{{ request.email }}</div>
                  <div><b class="light-text">UID: </b>{{ request.uid }}</div>
                </div>
              </div>

              <div class="right-buttons">
                  <div class="accept-button" id="accept-button" (click)="approveRequest(request?.id ?? 0)">
                  <b class="button-text">Accept</b>
                </div>
                <div class="reject-button" id="reject-button" (click)="rejectRequest(request?.id ?? 0)">
                  <b class="button-text">Reject</b>
                </div>
              </div>
            </div>
        </div>

        <div class="main-content" id="main-content" *ngIf="selectedClass === 'certifications'">
          <b class="no-text" *ngIf="(certifications | async)?.length == 0">NO RESULTS</b>
          <div *ngFor="let certificate of certifications | async" class="request-frame">
              <img
              class="icon-image"
              alt=""
              src="../../../assets/public/certificate (5).png"
              />
              <div class="left-data">
                <div class="top-data-box">
                  <div class="horizontal-frame">
                    <div class="title"><b>No. {{ certificate.id }} {{ certificate.commonName }}</b> </div>

                  </div>


                </div>

                <div class="bottom-data-box">
                  <div class="horizontal-frame"><b class="light-text" style="margin-right: 5px;">Validation Period: </b> {{ certificate.validFrom | date: 'd.MM.yyyy.' }} - {{ certificate.validTo | date: 'd.MM.yyyy.'}} </div>

                  <div><b class="light-text">Alias: </b>{{ certificate.alias }}</div>
                  <div><b class="light-text">Issuer Alias: </b>{{ certificate.issuerAlias }}</div>
                  <div><b class="light-text">Template: </b>{{ certificate.template }}</div>
                </div>
              </div>

              <div class="right-buttons">
                <div class="revoke-button" id="revoke-button" (click)="revoke(certificate?.id ?? 0)">
                  <b class="button-text">Revoke</b>
                </div>
              </div>
            </div>
        </div>

      <app-shorter-footer></app-shorter-footer>

    </div>
  </body>
</html>
